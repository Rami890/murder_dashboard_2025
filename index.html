<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>דשבורד נתוני רצח בישראל 2021-2025</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    
    <style>
        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
        }
        .chart-container-large {
            position: relative;
            height: 400px;
            width: 100%;
        }
    </style>
</head>
<body class="bg-gray-100">
    <div class="min-h-screen p-4" dir="rtl">
        <div class="max-w-7xl mx-auto">
            <!-- Header -->
            <header class="mb-8">
                <h1 class="text-3xl font-bold text-gray-900 mb-2">ניתוח נתונים על אירועי רצח בישראל</h1>
                <p class="text-gray-600">מתחילת שנת 2021 עד 10 במרץ 2025 | מקור: משטרת ישראל</p>
            </header>

            <!-- Navigation -->
            <nav class="mb-8">
                <div class="flex flex-wrap gap-2">
                    <button onclick="showView('overview')" id="btn-overview" class="px-4 py-2 rounded-lg font-medium transition-colors bg-blue-600 text-white">
                        סקירה כללית
                    </button>
                    <button onclick="showView('trends')" id="btn-trends" class="px-4 py-2 rounded-lg font-medium transition-colors bg-white text-gray-700 hover:bg-gray-50">
                        מגמות לפי זמן
                    </button>
                    <button onclick="showView('districts')" id="btn-districts" class="px-4 py-2 rounded-lg font-medium transition-colors bg-white text-gray-700 hover:bg-gray-50">
                        ניתוח לפי מחוז
                    </button>
                    <button onclick="showView('solving')" id="btn-solving" class="px-4 py-2 rounded-lg font-medium transition-colors bg-white text-gray-700 hover:bg-gray-50">
                        שיעורי פענוח
                    </button>
                    <button onclick="showView('2025')" id="btn-2025" class="px-4 py-2 rounded-lg font-medium transition-colors bg-white text-gray-700 hover:bg-gray-50">
                        נתוני 2025
                    </button>
                </div>
            </nav>

            <!-- Main Content -->
            <main>
                <!-- Overview View -->
                <div id="view-overview" class="view">
                    <div class="space-y-6">
                        <!-- Summary Cards -->
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                            <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                                <h3 class="text-lg font-semibold text-blue-900">סה"כ אירועי רצח</h3>
                                <p class="text-2xl font-bold text-blue-700">891</p>
                                <p class="text-sm text-blue-600">2021 - מרץ 2025</p>
                            </div>
                            <div class="bg-red-50 p-4 rounded-lg border border-red-200">
                                <h3 class="text-lg font-semibold text-red-900">סה"כ קורבנות</h3>
                                <p class="text-2xl font-bold text-red-700">961</p>
                                <p class="text-sm text-red-600">2021 - מרץ 2025</p>
                            </div>
                            <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                                <h3 class="text-lg font-semibold text-green-900">שיעור פענוח כללי</h3>
                                <p class="text-2xl font-bold text-green-700">32%</p>
                                <p class="text-sm text-green-600">2021-2024</p>
                            </div>
                            <div class="bg-orange-50 p-4 rounded-lg border border-orange-200">
                                <h3 class="text-lg font-semibold text-orange-900">אירועים ב-2025</h3>
                                <p class="text-2xl font-bold text-orange-700">51</p>
                                <p class="text-sm text-orange-600">עד 10 במרץ</p>
                            </div>
                        </div>

                        <!-- Charts -->
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="bg-white p-6 rounded-lg shadow-md">
                                <h3 class="text-xl font-bold mb-4">מספר אירועי רצח וקורבנות לפי שנה</h3>
                                <div class="chart-container">
                                    <canvas id="yearlyChart"></canvas>
                                </div>
                            </div>
                            <div class="bg-white p-6 rounded-lg shadow-md">
                                <h3 class="text-xl font-bold mb-4">התפלגות לפי מגזר (2021-2024)</h3>
                                <div class="chart-container">
                                    <canvas id="sectorChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Trends View -->
                <div id="view-trends" class="view hidden">
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-xl font-bold mb-4">מגמת אירועי רצח לפי מגזר</h3>
                        <div class="chart-container-large">
                            <canvas id="trendsChart"></canvas>
                        </div>
                        <div class="mt-4 p-4 bg-yellow-50 rounded-lg">
                            <p class="text-sm text-yellow-800">
                                <strong>תובנות מרכזיות:</strong> בשנת 2023 חלה עלייה של מעל 100% באירועי רצח במגזר הערבי
                                (מ-103 ב-2022 ל-210 ב-2023). במגזר היהודי העלייה הייתה מתונה יותר (מ-36 ל-47).
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Districts View -->
                <div id="view-districts" class="view hidden">
                    <div class="space-y-6">
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-xl font-bold mb-4">ממוצע שנתי של אירועי רצח לפי מגזר במחוזות נבחרים</h3>
                            <div class="chart-container-large">
                                <canvas id="districtsChart"></canvas>
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-xl font-bold mb-4">מספר אירועי רצח בכל שנה במגזר הערבי לכל 100,000 תושבים במחוזות נבחרים</h3>
                            <div class="chart-container-large">
                                <canvas id="normalizedChart"></canvas>
                            </div>
                            <div class="mt-4 p-4 bg-red-50 rounded-lg">
                                <p class="text-sm text-red-800">
                                    <strong>עלייה ניכרת ב-2023:</strong> במחוז צפון - מ-3.2 אירועי רצח לכל 100,000 תושבים ערבים בשנת 2022 
                                    ל-9.2 אירועים בשנת 2023 - עלייה של פי שלושה כמעט.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Solving Rates View -->
                <div id="view-solving" class="view hidden">
                    <div class="space-y-6">
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-xl font-bold mb-4">שיעורי פענוח לפי שנה ומגזר</h3>
                            <div class="chart-container-large">
                                <canvas id="solvingChart"></canvas>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
                                <div class="bg-blue-50 p-3 rounded-lg">
                                    <p class="font-semibold text-blue-900">שיעור פענוח יהודים</p>
                                    <p class="text-2xl font-bold text-blue-700">65%</p>
                                    <p class="text-sm text-blue-600">2021-2024</p>
                                </div>
                                <div class="bg-green-50 p-3 rounded-lg">
                                    <p class="font-semibold text-green-900">שיעור פענוח ערבים</p>
                                    <p class="text-2xl font-bold text-green-700">20%</p>
                                    <p class="text-sm text-green-600">2021-2024</p>
                                </div>
                                <div class="bg-red-50 p-3 rounded-lg">
                                    <p class="font-semibold text-red-900">שיעור פענוח אחרים</p>
                                    <p class="text-2xl font-bold text-red-700">67%</p>
                                    <p class="text-sm text-red-600">2021-2024</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 2025 Data View -->
                <div id="view-2025" class="view hidden">
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-xl font-bold mb-4">נתוני 2025 (עד 10 במרץ)</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="chart-container">
                                <canvas id="data2025Chart"></canvas>
                            </div>
                            <div class="space-y-4">
                                <div class="bg-gray-50 p-4 rounded-lg">
                                    <h4 class="font-semibold">סיכום תקופת 2025</h4>
                                    <ul class="mt-2 space-y-1 text-sm">
                                        <li>• <strong>51 אירועי רצח</strong> (58 קורבנות)</li>
                                        <li>• <strong>78% ערבים</strong> (40 אירועים)</li>
                                        <li>• <strong>16% יהודים</strong> (8 אירועים)</li>
                                        <li>• <strong>6% אחרים</strong> (3 אירועים)</li>
                                    </ul>
                                </div>
                                <div class="bg-yellow-50 p-4 rounded-lg">
                                    <h4 class="font-semibold text-yellow-800">שיעור פענוח ב-2025</h4>
                                    <p class="text-2xl font-bold text-yellow-700">12%</p>
                                    <p class="text-sm text-yellow-600 mt-1">6 מתוך 51 אירועים</p>
                                    <div class="mt-2 text-sm">
                                        <p>• יהודים: 38% (3/8)</p>
                                        <p>• ערבים: 8% (3/40)</p>
                                        <p>• אחרים: 0% (0/3)</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>

            <!-- Footer -->
            <footer class="mt-12 p-4 bg-white rounded-lg shadow-md">
                <p class="text-sm text-gray-600 text-center">
                    <strong>מקור:</strong>
                    <a href="https://main.knesset.gov.il/activity/info/research/pages/incident.aspx?docid=48e639b1-f20a-f011-a857-005056aa1f91" 
                       target="_blank" rel="noopener noreferrer" 
                       class="text-blue-600 hover:text-blue-800 underline"
                       title="ניתוח נתונים על אירועי רצח בישראל מתחילת שנת 2021 עד 10 במרץ 2025">
                        "ניתוח נתונים על אירועי רצח בישראל מתחילת שנת 2021 עד 10 במרץ 2025"
                    </a>
                    | הכנסת - מרכז המחקר והמידע | 
                    כתיבה: רמי שוורץ | אישור: אורלי אלמגור לוטן | 
                    תאריך: י"ג באייר תשפ"ה, 11 במאי 2025
                </p>
            </footer>
        </div>
    </div>

    <script>
        // Navigation
        let currentView = 'overview';
        
        function showView(viewName) {
            // Hide all views
            document.querySelectorAll('.view').forEach(view => {
                view.classList.add('hidden');
            });
            
            // Show selected view
            document.getElementById(`view-${viewName}`).classList.remove('hidden');
            
            // Update buttons
            document.querySelectorAll('nav button').forEach(btn => {
                btn.className = 'px-4 py-2 rounded-lg font-medium transition-colors bg-white text-gray-700 hover:bg-gray-50';
            });
            document.getElementById(`btn-${viewName}`).className = 'px-4 py-2 rounded-lg font-medium transition-colors bg-blue-600 text-white';
            
            currentView = viewName;
            initializeCharts();
        }

        // Chart initialization
        let charts = {};

        function initializeCharts() {
            // Destroy existing charts
            Object.values(charts).forEach(chart => {
                if (chart) chart.destroy();
            });
            charts = {};

            if (currentView === 'overview') {
                createYearlyChart();
                createSectorChart();
            } else if (currentView === 'trends') {
                createTrendsChart();
            } else if (currentView === 'districts') {
                createDistrictsChart();
                createNormalizedChart();
            } else if (currentView === 'solving') {
                createSolvingChart();
            } else if (currentView === '2025') {
                create2025Chart();
            }
        }

        function createYearlyChart() {
            const ctx = document.getElementById('yearlyChart').getContext('2d');
            charts.yearly = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['2021', '2022', '2023', '2024'],
                    datasets: [{
                        label: 'אירועי רצח',
                        data: [161, 142, 274, 263],
                        backgroundColor: '#2563eb',
                        yAxisID: 'y'
                    }, {
                        label: 'קורבנות',
                        data: [173, 148, 300, 282],
                        borderColor: '#dc2626',
                        backgroundColor: 'transparent',
                        type: 'line',
                        yAxisID: 'y'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        function createSectorChart() {
            const ctx = document.getElementById('sectorChart').getContext('2d');
            charts.sector = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['ערבים', 'יהודים', 'אחרים'],
                    datasets: [{
                        data: [75, 19, 6],
                        backgroundColor: ['#16a34a', '#2563eb', '#dc2626']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }

        function createTrendsChart() {
            const ctx = document.getElementById('trendsChart').getContext('2d');
            charts.trends = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['2021', '2022', '2023', '2024'],
                    datasets: [{
                        label: 'יהודים',
                        data: [36, 36, 47, 38],
                        borderColor: '#2563eb',
                        backgroundColor: '#2563eb'
                    }, {
                        label: 'ערבים',
                        data: [115, 103, 210, 206],
                        borderColor: '#16a34a',
                        backgroundColor: '#16a34a'
                    }, {
                        label: 'אחרים',
                        data: [10, 3, 17, 19],
                        borderColor: '#dc2626',
                        backgroundColor: '#dc2626'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        function createDistrictsChart() {
            const ctx = document.getElementById('districtsChart').getContext('2d');
            charts.districts = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['חוף', 'מרכז', 'צפון', 'דרום'],
                    datasets: [{
                        label: 'יהודים',
                        data: [9, 12, 2, 9],
                        backgroundColor: '#2563eb'
                    }, {
                        label: 'ערבים',
                        data: [47, 32, 42, 19],
                        backgroundColor: '#16a34a'
                    }, {
                        label: 'אחרים',
                        data: [2, 2, 1, 2],
                        backgroundColor: '#dc2626'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            stacked: true
                        },
                        y: {
                            stacked: true,
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        function createNormalizedChart() {
            const ctx = document.getElementById('normalizedChart').getContext('2d');
            charts.normalized = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['2021', '2022', '2023', '2024'],
                    datasets: [{
                        label: 'חוף',
                        data: [9, 8, 14, 17],
                        borderColor: '#3b82f6',
                        backgroundColor: '#3b82f6',
                        fill: false
                    }, {
                        label: 'מרכז',
                        data: [14, 12, 19, 19],
                        borderColor: '#06b6d4',
                        backgroundColor: '#06b6d4',
                        fill: false
                    }, {
                        label: 'צפון',
                        data: [3, 3, 9, 8],
                        borderColor: '#10b981',
                        backgroundColor: '#10b981',
                        fill: false
                    }, {
                        label: 'דרום',
                        data: [4, 4, 7, 9],
                        borderColor: '#f59e0b',
                        backgroundColor: '#f59e0b',
                        fill: false
                    }, {
                        label: 'ירושלים',
                        data: [3, 0, 3, 1],
                        borderColor: '#8b5cf6',
                        backgroundColor: '#8b5cf6',
                        fill: false
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'אירועי רצח לכל 100,000 תושבים ערבים'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'שנה'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top'
                        }
                    }
                }
            });
        }

        function createSolvingChart() {
            const ctx = document.getElementById('solvingChart').getContext('2d');
            charts.solving = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['2021', '2022', '2023', '2024'],
                    datasets: [{
                        label: 'יהודים',
                        data: [78, 72, 66, 50],
                        borderColor: '#2563eb',
                        backgroundColor: '#2563eb'
                    }, {
                        label: 'ערבים',
                        data: [30, 23, 16, 18],
                        borderColor: '#16a34a',
                        backgroundColor: '#16a34a'
                    }, {
                        label: 'אחרים',
                        data: [80, 67, 71, 63],
                        borderColor: '#dc2626',
                        backgroundColor: '#dc2626'
                    }, {
                        label: 'ממוצע כללי',
                        data: [43, 37, 28, 26],
                        borderColor: '#6b7280',
                        backgroundColor: '#6b7280',
                        borderDash: [5, 5]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        }
                    }
                }
            });
        }

        function create2025Chart() {
            const ctx = document.getElementById('data2025Chart').getContext('2d');
            charts.data2025 = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['ערבים', 'יהודים', 'אחרים'],
                    datasets: [{
                        data: [40, 8, 3],
                        backgroundColor: ['#16a34a', '#2563eb', '#dc2626']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            initializeCharts();
        });
    </script>
</body>
</html>